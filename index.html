<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ–Ω—å –†–æ–∂–¥–µ–Ω–∏—è</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
        }
        .card {
            margin: 20px auto;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .delete-btn, .edit-link, .add-btn {
            display: none; /* –°–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        }
        .view-mode .delete-btn, 
        .view-mode .edit-link, 
        .view-mode .add-btn {
            display: none; /* –°–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ */
        }
        .admin-mode .delete-btn, 
        .admin-mode .edit-link, 
        .admin-mode .add-btn {
            display: inline; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Ä–µ–∂–∏–º–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ */
        }
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
        }
    </style>
</head>
<body class="">
    <div class="container">
        <h1 class="text-success text-center">–ú–æ–π –î–µ–Ω—å –†–æ–∂–¥–µ–Ω–∏—è</h1>

        <!-- –°–ø–∏—Å–æ–∫ –≥–æ—Å—Ç–µ–π -->
        <div class="card">
            <h2 class="text-primary">–°–ø–∏—Å–æ–∫ –≥–æ—Å—Ç–µ–π</h2>
            <ul class="list-group" id="guest-list"></ul>
            <button class="btn btn-success mt-3 add-btn" onclick="addGuest()">–î–æ–±–∞–≤–∏—Ç—å –≥–æ—Å—Ç—è</button>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π -->
        <div class="card">
            <h2 class="text-primary">–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π</h2>
            <ul class="list-group" id="gift-list"></ul>
            <button class="btn btn-success mt-3 add-btn" onclick="addGift()">–î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
        </div>
    </div>

    <!-- –ü–æ–¥–≤–∞–ª -->
    <footer>
        <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º —Å–ø–∏—Å–∫–æ–º –≥–æ—Å—Ç–µ–π –∏ –ø–æ–¥–∞—Ä–∫–æ–≤ üéâ</p>
    </footer>

    <!-- JavaScript -->
    <script>
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã
        const urlParams = new URLSearchParams(window.location.search);
        const mode = urlParams.get('mode'); // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ "mode"
        const isViewMode = mode === 'view';

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–ª–∞—Å—Å–∞ –¥–ª—è body
        document.body.classList.add(isViewMode ? 'view-mode' : 'admin-mode');

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
        function loadData() {
            const guests = JSON.parse(localStorage.getItem('guests')) || [];
            const gifts = JSON.parse(localStorage.getItem('gifts')) || [];

            const guestList = document.getElementById('guest-list');
            const giftList = document.getElementById('gift-list');

            guestList.innerHTML = '';
            giftList.innerHTML = '';

            guests.forEach((guest, index) => {
                const li = document.createElement('li');
                li.classList.add('list-group-item');
                li.innerHTML = `
                    <span>${guest.name}</span>
                    ${!isViewMode ? `
                    <span class="edit-link" onclick="editItem('guests', ${index}, 'contact')">${guest.contact || '–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç'}</span>
                    <span class="delete-btn" onclick="deleteItem('guests', ${index})">√ó</span>
                    ` : ''}
                `;
                guestList.appendChild(li);
            });

            gifts.forEach((gift, index) => {
                const li = document.createElement('li');
                li.classList.add('list-group-item');
                li.innerHTML = `
                    <span>${gift.name}</span>
                    ${!isViewMode ? `
                    <span class="delete-btn" onclick="deleteItem('gifts', ${index})">√ó</span>
                    ` : ''}
                `;
                giftList.appendChild(li);
            });
        }

        // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
        function addItem(type) {
            const name = prompt(type === 'guests' ? '–í–≤–µ–¥–∏—Ç–µ –∏–º—è –≥–æ—Å—Ç—è:' : '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞:');
            if (name) {
                const data = JSON.parse(localStorage.getItem(type)) || [];
                data.push({ name, contact: '' });
                localStorage.setItem(type, JSON.stringify(data));
                loadData();
            }
        }

        function addGuest() { addItem('guests'); }
        function addGift() { addItem('gifts'); }

        // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function editItem(type, index, field) {
            const data = JSON.parse(localStorage.getItem(type)) || [];
            const value = prompt(`–ò–∑–º–µ–Ω–∏—Ç–µ ${field === 'name' ? '–Ω–∞–∑–≤–∞–Ω–∏–µ' : '–∫–æ–Ω—Ç–∞–∫—Ç'}:`, data[index][field]);
            if (value !== null) {
                data[index][field] = value;
                localStorage.setItem(type, JSON.stringify(data));
                loadData();
            }
        }

        // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
        function deleteItem(type, index) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å?')) {
                const data = JSON.parse(localStorage.getItem(type)) || [];
                data.splice(index, 1);
                localStorage.setItem(type, JSON.stringify(data));
                loadData();
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = loadData;
    </script>
</body>
</html>
